<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1" />

  <!--link css sheets here-->
  <link href="/style.css" rel="stylesheet" />
</head>

<body>
  <div class="container">
    <div class="page-header">
      <h2>Liver Segmenter</h2>
      <!--the hidden attribute is temporary, and only for aesthetic purpose-->
      <div class="uploadStuff">
        <button class="button" id="saveDICOM" onclick="store()">test save</button>
        <button class="button" id="studySelect" onclick="StudySelect()">Select Study</button>
        <button class="button" id="seriesSelect" onclick="SeriesSelect()">Select Series</button>
        <button class="button" id="seriesSelect" onclick="deleteSeries()">Delete Series</button>
        <!--FIXME: may need to change format of the button here-->
        <button class="button" id="uploadFiles">Upload Files<input type="file" onchange="selectFolder(event);" webkitdirectory mozdirectory msdirectory odirectory directory multiple="multiple" /></button>
        <a class="button" id="downloadFiles" href="/zip">Download Files</a>
        
      </div>
    </div>
    <div class="Overlay Shown" id="StudySearch">
      <div id="searchWrapper">
        <input type="text" name="searchBar" id="searchBar" placeholder="search for a study by ID or patient ID" />
      </div>
      <table id="studiesList"></table>
    </div>
    <div class="Overlay Shown" id="SeriesSearch">
      <div id="SeriesSearchWrapper">
        <input type="text" name="searchBarSeries" id="searchBarSeries" placeholder="search for a series" />
      </div>
      <table id="seriesList"></table>
    </div>

    <div class="main-button-bar">
      <div class="buttons mode-buttons">
        <button class="button set-tool-mode is-primary" data-action="Zoom">
          Zoom
        </button>
        <button class="button set-tool-mode" data-action="Pan">
          Pan
        </button>
        <button class="button set-tool-mode" data-action="Wwwc">
          Wwwc
        </button>
        <button class="button set-tool-mode" data-action="StackScroll">
          Stack Scroll
        </button>
      </div>
      <div class="seg-buttons">
        <!--TODO: add button to load segmentation mask (or automatically load any present segmentation mask)-->
        <button class="button" id="sampleData" onclick="createSeg()">Create Seg</button>
        <button class="button" id="seg-loader" onclick="loadSegmentation()">
          Load Segmentation
        </button>
        <label for="switchSegment">Active Segment: </label><select id="switchSegment" onchange="changeSegment()">
        </select>
        <label for="switchActiveLabelmap">Active Labelmap: </label><select id="switchActiveLabelmap"
          onchange="changeLabelmap()">
          <option value="0">1</option>
          <option value="1">2</option>
        </select>
        <button class="button set-tool-mode" data-action="Brush">
          Brush
        </button>
        <input type="range" class="brush-slider" min="1" max="50" value="10">
        <button class="button control-history" data-action="undo">
          Undo
        </button>
        <button class="button control-history" data-action="redo">
          Redo
        </button>
      </div>
    </div>
    <div class="row">
      
      <p id="statusLine"></p>
      <div class=" Shown" id="LoadingScreen">
      </div>
      <div class="col-xs-9" id="divViewport">
        <div oncontextmenu="return false" class="cornerstone-enabled-image" unselectable="on"
          onselectstart="return false;" onmousedown="return false;">
          <div id="cornerstoneViewport"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- include the hammer.js library for touch gestures-->
  <script src="https://unpkg.com/hammerjs@2.0.8/hammer.js"></script>
  <!-- include the cornerstone library -->
  <script src="https://unpkg.com/dicom-parser@1.8.3/dist/dicomParser.min.js"></script>

  <!-- include the cornerstone library -->
  <script src="https://unpkg.com/cornerstone-core"></script>
  <script src="https://unpkg.com/cornerstone-math"></script>
  <script src="https://unpkg.com/cornerstone-wado-image-loader"></script>

  <!-- Why we're all here ;) -->
  <script src="https://unpkg.com/cornerstone-tools@%5E4"></script>
  <script src="./js/initInterface.js"></script>
  <script src="./js/initCornerstone.js"></script>
  <script src="./js/dcmjs.js"></script>

  <script src="./js/displaySegmentationMask.js"></script>
  <script src="./js/createSegmentationMask.js"></script>
  <!-- <script srve="https://unpkg.com/dcmjs@0.18.3/build/dcmjs.js"></script> -->

  <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>

  <script>
    "use strict";
    var process = {
      env: {
        NODE_ENV: "production"
      }
    };
    window.process = process;
  </script>

  <!-- Replaced by reactCornerstoneViewport.js to edit what tools we can use -->
  <!-- <script src="https://unpkg.com/react-cornerstone-viewport@0.1.23/dist/index.umd.js"></script> -->
  <script src="./js/reactCornerstoneViewport.js"></script>

  <script src="./js/viewport.js"></script>
  <script src="./js/handleDICOM.js"></script>
  <script src="./js/fileHandler.js"></script>
</body>
<!--Might attach a footer here in the future with credits-->
<footer>
  <p>This is a Banana Leaf Development Project, created for Dr.Roger Goldman in UC Davis' ECS193 class</p>
  <p>We've used <a href="https://github.com/cornerstonejs">cornerstonejs</a> and <a
      href="https://github.com/dcmjs-org/dcmjs">dcmjs</a> libraries for assistance with this</p>
</footer>

</html>
